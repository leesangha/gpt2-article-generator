<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="/static/css/style.css">
  <div style="display: flex;">
    <div>
      <img src="../static/icon.png" style="width: 12rem;" />
    </div>
    <div style=" display: flex;" `>
      <div style=" display:flex;align-items: flex-end; position: absolute;; right: 2rem;top:20px"><a
          href="https://github.com/leesangha/gpt2-article-generator">
          <img src="../static/github.png" style="height: 2rem;" /></a>
      </div>
      <div style="display:flex;align-items: flex-end; position:absolute; right:5rem;top:20px">
        <a href="https://ainize.ai/leesangha/gpt2-article-generator?branch=master"><img src="../static/api.png"
            style="height:2rem;" /></a>
      </div>
    </div>

  </div>
  <div class="bar">
    <span>GPT NEWS </span>
  </div>
  <div class="select">
    <div class="item">Go to #GPT-2</div>
    <div class="item">Go to #Ainizer</div>
    <div class="item">Go to #Python</div>
    <div class="item">Go to #Golang</div>
  </div>
</head>

<body>
  <div class="intro">
    <div style="margin-top:1rem;">이 프로젝트는 gpt2모델을 article형식으로
      fine-tuning한 모델을 사용하였습니다.</div>
    <ul>
      <li>1. 제목과 기사의 첫부분이 될 내용을 입력해주세요</li>
      <li>2. 기다립니다. (1분 20초정도 소요됩니다)</li>
    </ul>
    <div>
      <label>Title</label><input type="text" id="text" value="US election" style="width: 498px; height: 44px;border: 2px solid #B090FC; box-shadow: inset 0 4px 7px 0 rgba(176,144,252,0.5);
        font-weight: 600;
        font-size:20px" />
    </div>
    <div style="display: flex;">
      <div>
        <label>INITIAL CONTENT</label><input type="text" id="initial_content" value="US President Donald Trump" />
        <button id="submit">Submit</button>
      </div>
      <div id="wrapper" style="visibility: hidden;">
        <div class="loading-spinner"></div>
      </div>
    </div>
  </div>
  <div class="news" style="display: flex; max-width: 950px; margin-top: 1rem;">
    <div style="width:70%; max-width: 660px; margin-left: 7%;border: 1px #3F3F42 solid;">
      <div style="display: flex;justify-content: center; margin-top: 20px;"><img src="../static/icon.png"
          style="width: 8rem;" /></div>
      <h1 id="title" style="color: #3F3F42;">US Election 2020: Trump and Biden duel in critical state of Florida</h1>
      <hr>
      <div>
        <img src="../static/clock.png" style="height: 12px;">
        <span><time datetime="2020-10-30T03:51:47.000Z">1 hour ago</time></span>
      </div>
      <div style="color: #3F3F42;font-family: ReithSans,Helvetica,Arial,freesans,sans-serif;">
        <p><b id="subtitle">US President Donald Trump and his Democratic White House challenger Joe Biden have held
            duelling rallies in
            the critical election state of Florida.</b></p>
        <div id="output" style="margin-left:1rem; ">
          The two presidential campaigns are scheduled to visit Florida on
          Tuesday, and the two campaigns
          have been given by state officials and the state party. The two campaigns have been able to get by some
          delegates in Florida and in other states, but the campaign has been unable to get a majority of those
          delegates
          to support them. The two campaigns have been in contact with all of the state party leaders, state officials
          and
          the state party, but no one has shared the details of their talks. The two campaigns are scheduled to return
          to
          Florida on Tuesday for a press event between Trump and Biden and a rally with a bow toward the 2016
          presidential
          election floor. [In Florida, Trump, Clinton and Biden decamp for Florida] In Florida, Trump has been on a
          quest
          to win a majority of the primary votes in the state, though he has been a constant presence at campaign
          rallies
          and on cable news shows. Trump has been a candidate in Florida, and he is leading in the polls in the state by
          an average of more than points. Democrats, meanwhile, have not been able to accomplish much in Florida, where
          both campaigns are scheduled to visit. “The only thing we can do is get the state party involved in the
          process,” said state Democratic chairwoman Debbie Wasserman Schultz. “We’re going to communicate with the
          state
          party about how we can work together and get the state party involved in the process. ” Florida Democrats have
          been calling on state party leaders to attend the rally in the state, but no one has provided the details of
          their talks. The two campaigns are hoping to keep the momentum as they move on to Florida where they are
          scheduled to begin their campaign in early June. “We’re going to continue to work in Florida,” said state
          Democratic Party chairman Stu Ingraham, who spoke at the event. “We are focused on and the state party is
          doing
          very well. ”
        </div>
        <hr>
        <div>
          <b>Caption</b>
        </div>
        <ul id="caption">
          <li>The president will host South Carolina Gov. Nikki Haley in his closed office on April 29. </li>
        </ul>
      </div>
    </div>
    <div style="width: 20%; margin-left:1rem;">
      <div><span>Explore Other project</span></div>
      <div><span>hi</span></div>
    </div>
  </div>

  <script>
    document.getElementById("submit").onclick = () => {
      const formData = new FormData();
      const button = document.querySelector('button');
      button.disabled = true;
      document.getElementById('wrapper').style.visibility = 'visible';
      var message = document.getElementById('text').value;
      var content = document.getElementById('initial_content').value;
      document.getElementById('text').value = '';
      document.getElementById('initial_content').value = '';
      formData.append("message", message);
      formData.append("initial_content", content);

      fetch("/predict", {
          method: "POST",
          body: formData,
        })
        .then((response) => response.json())
        .then((data) => {
          try {
            var msg = data.message.replace(data.title, ' ');
            var output = document.getElementById('output');
            document.getElementById('wrapper').style.visibility = 'hidden'
            document.getElementById('title').innerHTML = data.title;

            // Array
            msg = msg.split('Caption');
            output.innerHTML = msg[0];

            //remove list
            var ul = document.getElementById('caption');
            while (ul.hasChildNodes()) {
              ul.removeChild(ul.firstChild);
            }
            for (var i = 1; i < msg.length; i++) {
              var li = document.createElement('li');
              li.innerHTML = msg[i];
              ul.appendChild(li);
              console.log(msg[i]);
            }
            button.disabled = false;
          } catch {
            document.getElementById('wrapper').style.visibility = 'hidden';
            button.disabled = false;
          }
        });
    };
  </script>

</html>